[tools]
uv = "0.9.22"
ruff = "0.14.13"
dprint = "0.51.1"

[tasks.install]
run = "uv sync"
description = "Install dependencies"

[tasks.codegen]
run = "echo \"No codegen needed\""
description = "Update generated code"

[tasks."lint:ruff"]
run = "ruff check . --fix"
description = "Lint Python files"

[tasks."lint:dprint"]
run = "dprint check"
description = "Lint files with dprint"

[tasks."fmt:ruff"]
run = "ruff format ."
description = "Format Python files"

[tasks."fmt:dprint"]
run = "dprint fmt"
description = "Format files with dprint"

[tasks."fmt:nix"]
run = "nixfmt *.nix || true"
description = "Format Nix files"

[tasks.lint]
depends = ["lint:*"]
description = "Run all linters"

[tasks.fmt]
depends = ["fmt:*"]
description = "Run all formatters"

[tasks.test]
run = "uv run pytest || [ $? -eq 5 ]"
description = "Run tests"

[tasks.ci]
depends = ["lint", "test"]
description = "Run CI checks"
